{"filter":false,"title":"datacleaning05.js","tooltip":"/week6/clean/datacleaning05.js","undoManager":{"mark":22,"position":22,"stack":[[{"start":{"row":0,"column":0},"end":{"row":137,"column":17},"action":"remove","lines":["// require modules","var fs = require('fs');","var cheerio = require('cheerio');","","// read zone 5 file","var content = fs.readFileSync('../data/m05.txt');","","// load to an object","var $ = cheerio.load(content);","// $ for selecting variables","","// create an array to store all the addresses & latlon","var m05data =   fs.readFileSync('../../week3/m05LatLon.json');","var m05 = JSON.parse(m05data);","","// location","$('h4[style=\"margin:0;padding:0;\"]').each(","  function(i,elem){","","    var location = $(this).html().replace(/^\\s*$[\\n\\r]{1,}/gm, '').replace(/\\s+/g,' ').replace('&apos;','\\'').trim();","    // remove empty lines and extra spaces and reformat hypostrophy","","    m05[i].location=location;","    // add each loaction as a json object to the array","  }",");","","// meeting group","$('td[style=\"border-bottom\\\\:1px solid #e3e3e3; width\\\\:260px\"]').each(","  function(i,elem){","    var group = $(this).html().split('<br>')[1].replace('<b>','').replace('</b>','').replace(/^\\s*$[\\n\\r]{1,}/gm, '').replace(/\\s+/g,' ').replace('&apos;','\\'').trim();","    // remove empty lines and extra spaces","    m05[i].group=group;","    // add each meeting group as a json object to the array","  }",");","","// wheelchair","$('td[style=\"border-bottom\\\\:1px solid #e3e3e3; width\\\\:260px\"]').each(","  function(i,elem){","    var wheelchairAccess = $(this).find('span').html(); // find span element","    if (wheelchairAccess == null) {","      m05[i].wheelchair = false;","    } else {","      m05[i].wheelchair = true;","    }","    // add each wheelchair access as a json object to the array","  }",");","","// day","$('td[style=\"border-bottom\\\\:1px solid #e3e3e3;width\\\\:350px;\"]').each(","  function(i,elem){","    var sections = $(this).html().replace(/^\\s*$[\\n\\r]{1,}/gm, '').replace(/\\s+/g,'').split('<br><br>');","    // remove empty lines and extra spaces and split each day","    // console.log(sections);","    var day=[];","    for (var j=0; j<sections.length; j++){","      var sec = sections[j].split('<b>')[1];","      if (sec != undefined){","        day.push(sec.substring(0, sec.indexOf('sFrom')));","        // console.log(sec);","      }","    }","    //","    //add each day as a json object to the array","    // console.log(m05[i]);","    m05[i].day = day;","  }",");","","// schedule","$('td[style=\"border-bottom\\\\:1px solid #e3e3e3;width\\\\:350px;\"]').each(","  function(i,elem){","    var sections = $(this).html().replace(/^\\s*$[\\n\\r]{1,}/gm, '').replace(/\\s+/g,' ').split('<br> <br>');","    // remove empty lines and extra spaces and split each day","    // console.log(sections);","    var start=[];","    var end=[];","    for (var j=0; j<sections.length; j++){","","      var st = sections[j].split('</b>')[1];","      var et = sections[j].split('</b>')[2];","      if (st != undefined && et != undefined){","        start.push(st.substring(1, st.indexOf(' <')));","        end.push(et.substring(1, et.indexOf(' <')))","        // console.log(sec);","      }","      // type.push(sections[i].split('<b>')[2].substring(13,indexOf(' =')));","      // spinterest.push(sections[i].split('<b>')[3].substring(17)));","    }","    // console.log(start);","    // console.log(end);","    // add each time schedule as a json object to the array","    m05[i].start = start;","    m05[i].end = end;","  }",");","","// type $ special interest","$('td[style=\"border-bottom\\\\:1px solid #e3e3e3;width\\\\:350px;\"]').each(","  function(i,elem){","    var sections = $(this).html().replace(/^\\s*$[\\n\\r]{1,}/gm, '').replace(/\\s+/g,' ').split('<br> <br>');","    // remove empty lines and extra spaces and split each day","    var type=[];","    var spinterest=[];","    for (var j=0; j<sections.length; j++){","      var sec = sections[j].split('<br><b>');","      sec.shift(); // remove the first element in sections (day and time)","      sec = sec.join('').trim(); // concat the elements into a string","      var tpStr = \"Meeting Type</b> \";","      var spStr = \"Special Interest</b> \";","      var tp;","      var sp;","      if (sec.includes(tpStr)) {","        tp = sec.substring(sec.indexOf(tpStr)+tpStr.length,sec.indexOf(' ='));","      }","      type.push(tp);","      if (sec.includes(spStr)) {","        sp = sec.substring(sec.indexOf(spStr)+spStr.length);","      }","      spinterest.push(sp);","","    }","    // console.log(type);","    // console.log(spinterest);","    // add each type and special interest as a json object to the array","    m05[i].type = type;","    m05[i].spinterest = spinterest;","  }",");","","for (var i=0; i<m05.length; i++){","  m05[i].zone = 5;","}","","fs.writeFileSync('m05update.json', JSON.stringify(m05));","// save json file"],"id":2},{"start":{"row":0,"column":0},"end":{"row":135,"column":17},"action":"insert","lines":["// require modules","var fs = require('fs');","var cheerio = require('cheerio');","","// read zone file","var content = fs.readFileSync('../data/m02.txt');","","// load to an object","var $ = cheerio.load(content);","// $ for selecting variables","","// create an array to store all the addresses & latlon","var m02data =   fs.readFileSync('../../week3/m02LatLon.json');","var m02 = JSON.parse(m02data);","","// location","$('h4[style=\"margin:0;padding:0;\"]').each(","  function(i,elem){","","   var locationName=  $(elem).text().trim().replace(/'/g,\"''\");"," if( locationName !=''){","       m02[i].mtlocation=locationName;","       ","   }else{","        m02[i].mtlocation=null;","   }","   // console.log(locationName);","  });","  ","  ","","","// meeting group","$('td[style=\"border-bottom\\\\:1px solid #e3e3e3; width\\\\:260px\"]').each(","  function(i,elem){","    var group = $(elem).find('b').text().trim().split(\" -\")[0].replace(/\\s\\s/g,'').replace(/-/g,' ').trim().replace(/'/g,\"''\");","    // remove empty lines and extra spaces","    m02[i].group=group;","    // add each meeting group as a json object to the array","  }",");","","// wheelchair","$('td[style=\"border-bottom\\\\:1px solid #e3e3e3; width\\\\:260px\"]').each(","  function(i,elem){","    var wheelchairAccess = $(this).find('span').html(); // find span element","    if (wheelchairAccess == null) {","      m02[i].wheelchair = false;","    } else {","      m02[i].wheelchair = true;","    }","    // add each wheelchair access as a json object to the array","  }",");","","// day","$('td[style=\"border-bottom\\\\:1px solid #e3e3e3;width\\\\:350px;\"]').each(","  function(i,elem){","    var sections = $(this).html().replace(/^\\s*$[\\n\\r]{1,}/gm, '').replace(/\\s+/g,'').split('<br><br>');","    // remove empty lines and extra spaces and split each day","    // console.log(sections);","    var day=[];","    for (var j=0; j<sections.length; j++){","      var sec = sections[j].split('<b>')[1];","      if (sec != undefined){","        day.push(sec.substring(0, sec.indexOf('sFrom')));","        // console.log(sec);","      }","    }","    //","    //add each day as a json object to the array","    // console.log(m02[i]);","    m02[i].day = day;","  }",");","","// schedule","$('td[style=\"border-bottom\\\\:1px solid #e3e3e3;width\\\\:350px;\"]').each(","  function(i,elem){","    var sections = $(this).html().replace(/^\\s*$[\\n\\r]{1,}/gm, '').replace(/\\s+/g,' ').split('<br> <br>');","    // remove empty lines and extra spaces and split each day","    // console.log(sections);","    var start=[];","    var end=[];","    for (var j=0; j<sections.length; j++){","","      var st = sections[j].split('</b>')[1];","      var et = sections[j].split('</b>')[2];","      if (st != undefined && et != undefined){","        start.push(st.substring(1, st.indexOf(' <')));","        end.push(et.substring(1, et.indexOf(' <')))","        // console.log(sec);","      }","      // type.push(sections[i].split('<b>')[2].substring(13,indexOf(' =')));","      // spinterest.push(sections[i].split('<b>')[3].substring(17)));","    }","    // console.log(start);","    // console.log(end);","    // add each time schedule as a json object to the array","    m02[i].start = start;","    m02[i].end = end;","  }",");","","// type $ special interest"," $('td[style=\"border-bottom\\\\:1px solid #e3e3e3;width\\\\:350px;\"]').each(function(i,elem){","","    var sections = $(this).text().trim().replace(/\\A*.*Meeting /g, '').split(/\\s\\s+/g)//.replace(/=\\\\?.*/g, '')//.trim().split(\" \");","        var typeofAA=[];","        var specialIn=[];","       \tvar tpStr = \"Type\";","        \tvar spStr = \"Special Interest\";","            for (var j=0; j< sections.length; j++){","                if (sections[j].includes(tpStr)){","                typeofAA.push(sections[j].replace(/\\A*.*Type /g, '').replace(/=\\\\?.*/g, '').trim());","                }else {","                    typeofAA.push('null')","                }","                if (sections[j].includes(spStr)){","                     specialIn.push(sections[j].replace(/\\A*.*Special Interest /g, ''));","                }else{","                    specialIn.push('null')","                    }","        }","     //console.log(sections);","    //  console.log(typeofAA)","     m02[i].type = typeofAA;","      m02[i].spinterest = specialIn;","      //console.log(specialIn);"," });","","","fs.writeFileSync('m02update.json', JSON.stringify(m02));","// save json file","","console.log(m02);"]}],[{"start":{"row":135,"column":0},"end":{"row":135,"column":1},"action":"insert","lines":["/"],"id":3},{"start":{"row":135,"column":1},"end":{"row":135,"column":2},"action":"insert","lines":["/"]}],[{"start":{"row":132,"column":52},"end":{"row":132,"column":53},"action":"remove","lines":["2"],"id":4},{"start":{"row":132,"column":52},"end":{"row":132,"column":53},"action":"insert","lines":["5"]}],[{"start":{"row":127,"column":8},"end":{"row":127,"column":9},"action":"remove","lines":["2"],"id":5},{"start":{"row":127,"column":8},"end":{"row":127,"column":9},"action":"insert","lines":["5"]}],[{"start":{"row":126,"column":7},"end":{"row":126,"column":8},"action":"remove","lines":["2"],"id":6},{"start":{"row":126,"column":7},"end":{"row":126,"column":8},"action":"insert","lines":["5"]}],[{"start":{"row":100,"column":6},"end":{"row":100,"column":7},"action":"remove","lines":["2"],"id":7},{"start":{"row":100,"column":6},"end":{"row":100,"column":7},"action":"insert","lines":["5"]}],[{"start":{"row":99,"column":6},"end":{"row":99,"column":7},"action":"remove","lines":["2"],"id":8},{"start":{"row":99,"column":6},"end":{"row":99,"column":7},"action":"insert","lines":["5"]}],[{"start":{"row":72,"column":6},"end":{"row":72,"column":7},"action":"remove","lines":["2"],"id":9},{"start":{"row":72,"column":6},"end":{"row":72,"column":7},"action":"insert","lines":["5"]}],[{"start":{"row":49,"column":8},"end":{"row":49,"column":9},"action":"remove","lines":["2"],"id":10}],[{"start":{"row":49,"column":8},"end":{"row":49,"column":9},"action":"insert","lines":["5"],"id":11}],[{"start":{"row":47,"column":8},"end":{"row":47,"column":9},"action":"remove","lines":["2"],"id":12},{"start":{"row":47,"column":8},"end":{"row":47,"column":9},"action":"insert","lines":["5"]}],[{"start":{"row":37,"column":6},"end":{"row":37,"column":7},"action":"remove","lines":["2"],"id":13}],[{"start":{"row":37,"column":6},"end":{"row":37,"column":7},"action":"insert","lines":["5"],"id":14}],[{"start":{"row":24,"column":10},"end":{"row":24,"column":11},"action":"remove","lines":["2"],"id":15}],[{"start":{"row":24,"column":10},"end":{"row":24,"column":11},"action":"insert","lines":["5"],"id":16}],[{"start":{"row":21,"column":9},"end":{"row":21,"column":10},"action":"remove","lines":["2"],"id":17},{"start":{"row":21,"column":9},"end":{"row":21,"column":10},"action":"insert","lines":["5"]}],[{"start":{"row":13,"column":6},"end":{"row":13,"column":7},"action":"remove","lines":["2"],"id":18},{"start":{"row":13,"column":6},"end":{"row":13,"column":7},"action":"insert","lines":["5"]}],[{"start":{"row":12,"column":6},"end":{"row":12,"column":7},"action":"remove","lines":["2"],"id":19},{"start":{"row":12,"column":6},"end":{"row":12,"column":7},"action":"insert","lines":["5"]}],[{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"remove","lines":["2"],"id":20},{"start":{"row":13,"column":23},"end":{"row":13,"column":24},"action":"insert","lines":["5"]}],[{"start":{"row":12,"column":47},"end":{"row":12,"column":48},"action":"remove","lines":["2"],"id":21},{"start":{"row":12,"column":47},"end":{"row":12,"column":48},"action":"insert","lines":["5"]}],[{"start":{"row":5,"column":41},"end":{"row":5,"column":42},"action":"remove","lines":["2"],"id":22},{"start":{"row":5,"column":41},"end":{"row":5,"column":42},"action":"insert","lines":["5"]}],[{"start":{"row":71,"column":21},"end":{"row":71,"column":22},"action":"remove","lines":["2"],"id":23},{"start":{"row":71,"column":21},"end":{"row":71,"column":22},"action":"insert","lines":["5"]}],[{"start":{"row":132,"column":20},"end":{"row":132,"column":21},"action":"remove","lines":["2"],"id":24},{"start":{"row":132,"column":20},"end":{"row":132,"column":21},"action":"insert","lines":["5"]}]]},"ace":{"folds":[],"scrolltop":47.5,"scrollleft":0,"selection":{"start":{"row":129,"column":4},"end":{"row":129,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":1,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1540503718925,"hash":"259585b8e0a7ffb842a734bca60086253e225890"}